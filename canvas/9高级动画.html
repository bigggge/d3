<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>高级动画</title>
</head>
<style>
    * {
        -webkit-box-sizing: content-box;
        -moz-box-sizing: content-box;
        box-sizing: content-box;
    }
</style>
<body>

<canvas id="canvas" width="600" height="300" style="border: 1px solid gold"></canvas>

<script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');

    var ball = {
        x: 30,
        y: 30,
        radius: 30,
        vx: 3,
        vy: 3,
        color: 'blue',
        draw: function () {
            ctx.beginPath()
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true)
            ctx.closePath()
            ctx.fillStyle = this.color
            ctx.fill()
        }
    };

    function draw() {
        console.log('x', ball.x, 'y', ball.y)

        if (ball.x > canvas.width - ball.radius || ball.x - ball.radius < 0) {
            ball.vx = -ball.vx;
            console.log('crash!')
        }
        if (ball.y > canvas.height - ball.radius || ball.y - ball.radius < 0) {
            ball.vy = -ball.vy;
            console.log('crash!')
        }

        ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ball.draw()
        ball.x += ball.vx;
        ball.y += ball.vy;

        window.requestAnimationFrame(draw)
    }

    window.requestAnimationFrame(draw)

</script>

</body>
</html>